function ISEObject(){}function Element(){this.Definition=null}function Div(e){this.Definition=$("<div></div>"),this.Definition.attr("Id",e)}function Ul(e){this.Definition=$("<ul></ul>"),this.Id,this.Definition.attr("Id",this.Id)}function Li(e){this.Definition=$("<li></li>"),this.Id,this.Definition.attr("Id",this.Id)}function Img(e){this.Definition=$("<Img></Img>"),this.Id,this.Definition.attr("Id",this.Id)}function A(e){this.Definition=$("<a></a>"),this.Id,this.Definition.attr("Id",this.Id)}ISEObject.prototype.Render=function(e,t){$(e).append(t.Definition)},Element.prototype.AddChild=function(e){this.Definition.append(e.Definition)},Element.prototype.AddAttributesWithValue=function(e,t){this.Definition.attr(e,t)},Element.prototype.AddText=function(e){this.Definition.text(e)},Element.prototype.AddHtml=function(e){this.Definition.html(e)},Element.prototype.AddInlineStyle=function(e,t){this.Definition.css(e,t)},Div.prototype=new Element,Div.prototype.constructor=Div,Ul.prototype=new Element,Ul.prototype.constructor=Ul,Li.prototype=new Element,Li.prototype.constructor=Li,Img.prototype=new Element,Img.prototype.constructor=Img,A.prototype=new Element,A.prototype.constructor=A,function(e){e.fn.ISEAccordion=function(t){function i(t){t.find("li").each(function(){var t,i,n,o,r;if(t=jQuery.trim(e(this).find("img").attr("src")),l.htmlConfig?(i=e.trim(e(this).find('p[pos="left"]').html()),n=e.trim(e(this).find('p[pos="bottom"]').html()),o=e.trim(e(this).find('a[name="link"]').html())):(i=e(this).find('p[pos="left"]').text(),n=e(this).find('p[pos="bottom"]').text(),o=e(this).find('a[name="link"]').text()),r=jQuery.trim(e(this).find('a[name="link"]').attr("target")),li=new Li,ul.AddChild(li),divTitle=new Div,divTitle.AddAttributesWithValue("class","title"),divTitle.AddHtml(i),1==l.showLeftText&&li.AddChild(divTitle),divItem=new Div,divItem.AddAttributesWithValue("class","item"),li.AddChild(divItem),divBottomText=new Div,divBottomText.AddAttributesWithValue("class","bottom-text"),divBottomText.AddHtml(n),1==l.showBottomText&&divItem.AddChild(divBottomText),image=new Img,image.AddAttributesWithValue("src",t),""!=o){var a=new A;a.AddAttributesWithValue("href",o),"undefined"!=r&&""!=r&&a.AddAttributesWithValue("target",r),divItem.AddChild(a),a.AddChild(image)}else divItem.AddChild(image);h==f-1&&(li.AddAttributesWithValue("class","last"),li.AddInlineStyle("border-right","none")),h++}),n(f)}function n(t){var i=0;i=l.galleryWidth/t-1,u=(l.galleryWidth-l.pictureWidth)/(t-1)-1;var n='<style type="text/css">'+s+" .title{width:"+l.galleryHeight+"px;height:30px;background-color:"+l.backgroundColor+';-moz-transform-origin:0 0;-webkit-transform-origin:0 0;-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);color:#fff;font-size:13px;text-align:center;vertical-align:middle;position:absolute;bottom:-30px;left:0;line-height:30px;font-family:Arial}</style> \x3c!--[if IE]><style type="text/css"> .title {top:0;filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);}</style><![endif]--\x3e <style type="text/css"> '+s+"{position:relative;width:"+l.galleryWidth+"px;height:"+l.galleryHeight+"px;background-color:#000;font-size:18px;overflow:hidden}"+s+" ul{width:"+l.galleryWidth+"px;height:"+l.galleryHeight+"px;margin:0;padding:0}"+s+" li{float:left;height:"+l.galleryHeight+"px;width:"+i+"px;list-style:none;border-right:solid 1px "+l.borderColor+";position:relative;overflow:hidden}"+s+" li .item{height:"+l.galleryHeight+"px;width:"+l.pictureWidth+"px;position:absolute}"+s+" li img{height:"+l.galleryHeight+"px;width:"+l.pictureWidth+"px; border-width:0;}.last{overflow:visible!important;overflow-x:visible!important;overflow-y:visible!important}"+s+" .bottom-text{background-color:#000;width:"+(l.pictureWidth-20)+"px;padding:5px 10px 5px 10px; text-align:justify;font-family:Arial;color:#fff;font-weight:400;font-size:12px;position:absolute;bottom:-100px}</style>";e("head").append(n),null!=m&&m.remove(),fl=new ISEObject,fl.Render(s,accordion),e(s+" .item").fadeTo(0,l.imagesOpacity,function(){}),e(s+" .bottom-text").fadeTo(0,l.bottomTextOpacity,function(){}),l.autoPlay?(e(s+" ").mouseenter(function(){c=!0}),e(s+" ").mouseleave(function(){c=!1})):("over"==l.eventType&&e(s+"  li").mouseenter(function(){o(s,this)}),"click"==l.eventType&&e(s+"  li").click(function(){o(s,this)}),e(s+"  .item").mouseenter(function(){r(this)}),e(s+" ").mouseleave(function(){e(s+"  li").animate({width:i},{duration:l.animationTime,queue:!1,easing:"swing",complete:function(){}})}),e(s+"  .item").mouseleave(function(){a(this)}))}function o(t,i){var n=i;e(t+"  li").animate({width:u},{duration:l.animationTime,queue:!1,easing:"swing",complete:function(){}}),e(n).find(".bottom-text").animate({bottom:10},{duration:1200,queue:!1,easing:"easeInOutBounce"}),e(n).animate({width:l.pictureWidth},{duration:l.animationTime,queue:!1,easing:"swing",complete:function(){}})}function r(t){var i=t;e(i).fadeTo(l.animationTime,1,function(){e(i).clearQueue()})}function a(t){var i=t;e(i).find(".bottom-text").animate({bottom:-e(i).find(".bottom-text").height()-15},{duration:1200,queue:!1,easing:"easeInOutBounce"}),e(i).fadeTo(l.animationTime,l.imagesOpacity,function(){e(i).clearQueue()})}function d(){c||("ltr"==l.switchOrder&&(a(0!=g?w[g-1]:w[f-1]),o(s,p[g]),r(w[g]),++g==f&&(g=0)),"rtl"==l.switchOrder&&(a(1!=++g?w[f-g+1]:w[0]),o(s,p[f-g]),r(w[f-g]),g==f&&(g=0))),setTimeout(d,1e3*l.switchTime)}var l=e.extend({},e.fn.ISEAccordion.defaults,t),s=this.selector,u=0,c=!1;jQuery.extend(jQuery.easing,{easeOutBounce:function(e,t,i,n,o){return(t/=o)<1/2.75?n*(7.5625*t*t)+i:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+i:n*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,n,o){var r=1.70158,a=0,d=n;if(0==t)return i;if(2==(t/=o/2))return i+n;if(a||(a=o*(.3*1.5)),d<Math.abs(n)){d=n;r=a/4}else r=a/(2*Math.PI)*Math.asin(n/d);return t<1?d*Math.pow(2,10*(t-=1))*Math.sin((t*o-r)*(2*Math.PI)/a)*-.5+i:d*Math.pow(2,-10*(t-=1))*Math.sin((t*o-r)*(2*Math.PI)/a)*.5+n+i}}),accordion=new Div("container"),accordion.AddInlineStyle("position","relative"),ul=new Ul,accordion.AddChild(ul);var f,m=null,h=0;1==l.htmlConfig?(m=e(s+" ul"),f=e(m).find("li").length,i(m)):e.ajax({type:"GET",url:l.assetsPath+"/data.xml",dataType:"xml",success:function(t){f=e(t).find("li").length,i(e(t))},error:function(e,t,i){alert("Can not load configuration XML, please check the path.")}});var g=0,p=e(s+"  li"),w=e(s+"  .item");l.autoPlay&&d()},e.fn.ISEAccordion.defaults={galleryWidth:600,galleryHeight:400,pictureWidth:300,backgroundColor:"#222",borderColor:"#9999aa",imagesOpacity:.5,bottomTextOpacity:.6,eventType:"over",showLeftText:!0,showBottomText:!0,animationTime:600,assetsPath:"assets",htmlConfig:!0,autoPlay:!1,switchTime:2,switchOrder:"ltr"}}(jQuery),function(e){"use strict";function t(e,t,i){"addEventListener"in window?e.addEventListener(t,i,!1):"attachEvent"in window&&e.attachEvent("on"+t,i)}function i(e,t,i){"removeEventListener"in window?e.removeEventListener(t,i,!1):"detachEvent"in window&&e.detachEvent("on"+t,i)}function n(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!S;e+=1)S=window[t[e]+"RequestAnimationFrame"];S||d("setup","RequestAnimationFrame not supported")}function o(e){var t="Host page: "+e;return window.top!==window.self&&(t=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e),t}function r(e){return D+"["+o(e)+"]"}function a(e){return B[e]?B[e].log:z}function d(e,t){u("log",e,t,a(e))}function l(e,t){u("info",e,t,a(e))}function s(e,t){u("warn",e,t,!0)}function u(e,t,i,n){!0===n&&"object"==typeof window.console&&console[e](r(t),i)}function c(e){function n(){o("Height"),o("Width"),b(function(){y(W),g(S),O("resizedCallback",W)},W,"init")}function o(e){var t=Number(B[S]["max"+e]),i=Number(B[S]["min"+e]),n=e.toLowerCase(),o=Number(W[n]);d(S,"Checking "+n+" is in range "+i+"-"+t),i>o&&(o=i,d(S,"Set "+n+" to min value")),o>t&&(o=t,d(S,"Set "+n+" to max value")),W[n]=""+o}function r(e){return z.substr(z.indexOf(":")+R+e)}function a(e){d(S,"MessageCallback passed: {iframe: "+W.iframe.id+", message: "+e+"}"),O("messageCallback",{iframe:W.iframe,message:JSON.parse(e)}),d(S,"--")}function u(){var e=document.body.getBoundingClientRect(),t=W.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:t.height,iframeWidth:t.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(t.top-e.top,10),offsetLeft:parseInt(t.left-e.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}function c(e,t){T(function(){v("Send Page Info","pageInfo:"+u(),e,t)},32)}function I(){function e(e,t){function i(){B[o]?c(B[o].iframe,o):n()}["scroll","resize"].forEach(function(n){d(o,e+n+" listener for sendPageInfo"),t(window,n,i)})}function n(){e("Remove ",i)}var o=S;e("Add ",t),B[o].stopPageInfo=n}function k(){B[S]&&B[S].stopPageInfo&&(B[S].stopPageInfo(),delete B[S].stopPageInfo)}function A(e){var t=e.getBoundingClientRect();return h(S),{x:Math.floor(Number(t.left)+Number(P.x)),y:Math.floor(Number(t.top)+Number(P.y))}}function E(e){var t=e?A(W.iframe):{x:0,y:0},i={x:Number(W.width)+t.x,y:Number(W.height)+t.y};d(S,"Reposition requested from iFrame (offset x:"+t.x+" y:"+t.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](i.x,i.y):s(S,"Unable to scroll to requested position, window.parentIFrame not found"):(P=i,M(),d(S,"--"))}function M(){!1!==O("scrollCallback",P)?g(S):p()}function C(e){var t=e.split("#")[1]||"",i=decodeURIComponent(t),n=document.getElementById(i)||document.getElementsByName(i)[0];n?function(){var e=A(n);d(S,"Moving to in page link (#"+t+") at x: "+e.x+" y: "+e.y),P={x:e.x,y:e.y},M(),d(S,"--")}():window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(t):d(S,"In page link #"+t+" not found and window.parentIFrame not found"):d(S,"In page link #"+t+" not found")}function O(e,t){return f(S,e,t)}function F(){B[S].firstRun=!1}var z=e.data,W={},S=null;"[iFrameResizerChild]Ready"===z?function(){for(var e in B)v("iFrame requested init",x(e),document.getElementById(e),e)}():D===(""+z).substr(0,H)&&z.substr(H).split(":")[0]in B?(W=function(){var e=z.substr(H).split(":");return{iframe:B[e[0]].iframe,id:e[0],height:e[1],width:e[2],type:e[3]}}(),S=N=W.id,B[S].loaded=!0,!function(){var e=W.type in{true:1,false:1,undefined:1};return e&&d(S,"Ignoring init message from meta parent page"),e}()&&function(e){var t=!0;return B[e]||(t=!1,s(W.type+" No settings for "+e+". Message was: "+z)),t}(S)&&(d(S,"Received: "+z),function(){var e=!0;return null===W.iframe&&(s(S,"IFrame ("+W.id+") not found"),e=!1),e}()&&function(){var t=e.origin,i=B[S].checkOrigin;if(i&&""+t!="null"&&!(i.constructor===Array?function(){var e=0,n=!1;for(d(S,"Checking connection is from allowed list of origins: "+i);e<i.length;e++)if(i[e]===t){n=!0;break}return n}():function(){var e=B[S].remoteHost;return d(S,"Checking connection is from: "+e),t===e}()))throw new Error("Unexpected message received from: "+t+" for "+W.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(B[S].firstRun&&F(),W.type){case"close":m(W.iframe);break;case"message":a(r(6));break;case"scrollTo":E(!1);break;case"scrollToOffset":E(!0);break;case"pageInfo":c(B[S].iframe,S),I();break;case"pageInfoStop":k();break;case"inPageLink":C(r(9));break;case"reset":w(W);break;case"init":n(),O("initCallback",W.iframe);break;default:n()}}())):l(S,"Ignored: "+z)}function f(e,t,i){var n=null,o=null;if(B[e]){if("function"!=typeof(n=B[e][t]))throw new TypeError(t+" on iFrame["+e+"] is not a function");o=n(i)}return o}function m(e){var t=e.id;d(t,"Removing iFrame: "+t),e.parentNode&&e.parentNode.removeChild(e),f(t,"closedCallback",t),d(t,"--"),delete B[t]}function h(t){null===P&&(P={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop},d(t,"Get page position: "+P.x+","+P.y))}function g(e){null!==P&&(window.scrollTo(P.x,P.y),d(e,"Set page position: "+P.x+","+P.y),p())}function p(){P=null}function w(e){d(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),h(e.id),b(function(){y(e),v("reset","reset",e.iframe,e.id)},e,"reset")}function y(e){function t(t){e.iframe.style[t]=e[t]+"px",d(e.id,"IFrame ("+o+") "+t+" set to "+e[t]+"px")}function i(t){W||"0"!==e[t]||(W=!0,d(o,"Hidden iFrame detected, creating visibility listener"),k())}function n(e){t(e),i(e)}var o=e.iframe.id;B[o]&&(B[o].sizeHeight&&n("height"),B[o].sizeWidth&&n("width"))}function b(e,t,i){i!==t.type&&S?(d(t.id,"Requesting animation frame"),S(e)):e()}function v(e,t,i,n,o){function r(){var o=B[n].targetOrigin;d(n,"["+e+"] Sending msg to iframe["+n+"] ("+t+") targetOrigin: "+o),i.contentWindow.postMessage(D+t,o)}function a(){s(n,"["+e+"] IFrame("+n+") not found")}var l=!1;n=n||i.id,B[n]&&(i&&"contentWindow"in i&&null!==i.contentWindow?r():a(),function(){o&&B[n].warningTimeout&&(B[n].msgTimeout=setTimeout(function(){!B[n]||B[n].loaded||l||(l=!0,s(n,"IFrame has not responded within "+B[n].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))},B[n].warningTimeout))}())}function x(e){return e+":"+B[e].bodyMarginV1+":"+B[e].sizeWidth+":"+B[e].log+":"+B[e].interval+":"+B[e].enablePublicMethods+":"+B[e].autoResize+":"+B[e].bodyMargin+":"+B[e].heightCalculationMethod+":"+B[e].bodyBackground+":"+B[e].bodyPadding+":"+B[e].tolerance+":"+B[e].inPageLinks+":"+B[e].resizeFrom+":"+B[e].widthCalculationMethod}function I(i,n){function o(){var e=n&&n.id||V.id+F++;return null!==document.getElementById(e)&&(e+=F++),e}function r(){var e=B[c].firstRun,t=B[c].heightCalculationMethod in j;!e&&t&&w({iframe:i,height:0,width:0,type:"init"})}function a(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}function l(e){for(var t in V)V.hasOwnProperty(t)&&(B[c][t]=e.hasOwnProperty(t)?e[t]:V[t])}function u(e){return""===e||"file://"===e?"*":e}var c=function(e){return N=e,""===e&&(i.id=e=o(),z=(n||{}).log,N=e,d(e,"Added missing iframe ID: "+e+" ("+i.src+")")),e}(i.id);c in B&&"iFrameResizer"in i?s(c,"Ignored iFrame, already setup."):(function(e){e=e||{},B[c]={firstRun:!0,iframe:i,remoteHost:i.src.split("/").slice(0,3).join("/")},a(e),l(e),B[c].targetOrigin=!0===B[c].checkOrigin?u(B[c].remoteHost):"*"}(n),function(){switch(d(c,"IFrame scrolling "+(B[c].scrolling?"enabled":"disabled")+" for "+c),i.style.overflow=!1===B[c].scrolling?"hidden":"auto",B[c].scrolling){case!0:i.scrolling="yes";break;case!1:i.scrolling="no";break;default:i.scrolling=B[c].scrolling}}(),function(){function e(e){1/0!==B[c][e]&&0!==B[c][e]&&(i.style[e]=B[c][e]+"px",d(c,"Set "+e+" = "+B[c][e]+"px"))}function t(e){if(B[c]["min"+e]>B[c]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}t("Height"),t("Width"),e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}(),("number"==typeof B[c].bodyMargin||"0"===B[c].bodyMargin)&&(B[c].bodyMarginV1=B[c].bodyMargin,B[c].bodyMargin=B[c].bodyMargin+"px"),function(n){t(i,"load",function(){v("iFrame.onload",n,i,e,!0),r()}),v("init",n,i,e,!0)}(x(c)),Function.prototype.bind&&(B[c].iframe.iFrameResizer={close:m.bind(null,B[c].iframe),resize:v.bind(null,"Window resize","resize",B[c].iframe),moveToAnchor:function(e){v("Move to anchor","moveToAnchor:"+e,B[c].iframe,c)},sendMessage:function(e){v("Send Message","message:"+(e=JSON.stringify(e)),B[c].iframe,c)}}))}function T(e,t){null===L&&(L=setTimeout(function(){L=null,e()},t))}function k(){function e(){for(var e in B)!function(e){function t(t){return"0px"===B[e].iframe.style[t]}(function(e){return null!==e.offsetParent})(B[e].iframe)&&(t("height")||t("width"))&&v("Visibility change","resize",B[e].iframe,e)}(e)}function t(t){d("window","Mutation observed: "+t[0].target+" "+t[0].type),T(e,16)}var i=window.MutationObserver||window.WebKitMutationObserver;i&&function(){var e=document.querySelector("body"),n={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};new i(t).observe(e,n)}()}function A(e){d("window","Trigger event: "+e),T(function(){M("Window "+e,"resize")},16)}function E(){"hidden"!==document.visibilityState&&(d("document","Trigger event: Visiblity change"),T(function(){M("Tab Visable","resize")},16))}function M(e,t){for(var i in B)(function(e){return"parent"===B[e].resizeFrom&&B[e].autoResize&&!B[e].firstRun})(i)&&v(e,t,document.getElementById(i),i)}function C(){t(window,"message",c),t(window,"resize",function(){A("resize")}),t(document,"visibilitychange",E),t(document,"-webkit-visibilitychange",E),t(window,"focusin",function(){A("focus")}),t(window,"focus",function(){A("focus")})}function O(){function t(e,t){t&&(function(){if(!t.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==t.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+t.tagName+">")}(),I(t,e),o.push(t))}function i(e){e&&e.enablePublicMethods&&s("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var o;return n(),C(),function(n,r){switch(o=[],i(n),typeof r){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(r||"iframe"),t.bind(e,n));break;case"object":t(n,r);break;default:throw new TypeError("Unexpected data type ("+typeof r+")")}return o}}if("undefined"!=typeof window){var F=0,z=!1,W=!1,R="message".length,D="[iFrameSizer]",H=D.length,P=null,S=window.requestAnimationFrame,j={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},B={},L=null,N="Host Page",V={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:15e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){s("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};window.jQuery&&function(e){e.fn?e.fn.iFrameResize||(e.fn.iFrameResize=function(e){return this.filter("iframe").each(function(t,i){I(i,e)}).end()}):l("","Unable to bind to jQuery, it is not fully loaded.")}(window.jQuery),"function"==typeof define&&define.amd?define([],O):"object"==typeof module&&"object"==typeof module.exports?module.exports=O():window.iFrameResize=window.iFrameResize||O()}}();