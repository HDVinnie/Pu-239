function addEvent(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent){addEvent.events.push({element:e,event:t,handler:i}),e.attachEvent("on"+t,function(){i.apply(e)})}else e["on"+t]=i}function addEvents(e,t,i){for(var n=0;n<e.length;++n)for(var o=0;o<t.length;++o)addEvent(e[n],t[o],i)}function getRadioValue(e){if(!e.length)return null;for(var t=0;t<e.length;++t)if(e[t].checked)return e[t].value;return null}function getSelectValue(e){return e.tagName&&"select"===e.tagName.toLowerCase()?e.options[e.selectedIndex].value:null}function isElementValue(e,t){return t===FORM_MANAGER_EMPTY&&(t=""),getRadioValue(e)==t||getSelectValue(e)==t||e.tagName&&"select"!==e.tagName.toLowerCase()&&e.value==t}function setupDependencies(){for(var e=0;e<arguments.length;++e){for(var t=0,i=window.document.forms[arguments[e]].elements;t<i.length;++t)addEvents([i[t]],["change","keyup","focus","click","keydown"],function(){return this.form.calculateDependencies(),!0}),i[t].hide=function(){this.style.display="none",void 0!==this.checked?this.checked=!1:this.value="","label"==this.parentNode.tagName.toLowerCase()&&(this.parentNode.style.display="none"),this.hidden=!0},i[t].show=function(){this.style.display="","label"==this.parentNode.tagName.toLowerCase()&&(this.parentNode.style.display="")};(i=window.document.forms[arguments[e]]).calculateDependencies=function(){for(var e=0,t=this.elements;e<t.length;++e){t[e].hidden=!1;for(var i=0,n=t[e].className.split(FORM_MANAGER_CONDITION_SEPARATOR);i<n.length;++i)if(0===n[i].indexOf(FORM_MANAGER_DEPENDS)){for(var o=0,r=n[i].substr(FORM_MANAGER_DEPENDS.length).split(FORM_MANAGER_POSSIBILITY_SEPARATOR);o<r.length;++o)if(-1===r[o].indexOf(FORM_MANAGER_NAME_VALUE_SEPARATOR)){if(t[r[o]]&&t[r[o]].checked)break;o+1==r.length&&t[e].hide()}else if(s=(a=r[o].split(FORM_MANAGER_NAME_VALUE_SEPARATOR))[1],a=a[0],t[a]){if(isElementValue(t[a],s))break;o+1==r.length&&t[e].hide()}}else if(0===n[i].indexOf(FORM_MANAGER_CONFLICTS))if(-1===n[i].indexOf(FORM_MANAGER_NAME_VALUE_SEPARATOR)){if(t[n[i].substr(FORM_MANAGER_CONFLICTS.length)]&&t[n[i].substr(FORM_MANAGER_CONFLICTS.length)].checked){t[e].hide();break}}else{var a=n[i].substr(FORM_MANAGER_CONFLICTS.length).split(FORM_MANAGER_NAME_VALUE_SEPARATOR),s=a[1];if(a=a[0],t[a]&&isElementValue(t[a],s)){t[e].hide();break}}t[e].hidden||t[e].show()}},i.calculateDependencies()}}function getname(){var e=document.getElementById("torrent").value,t=(e=e.toString()).toLowerCase(),i=t.lastIndexOf("\\");-1==i?-1==(i=t.lastIndexOf("/"))||(i+=1):i+=1;var n=t.lastIndexOf("torrent"),o=e.substring(i,n-1);o=(o=(o=(o=(o=(o=(o=o.replace(/H\.264/gi,"H_264")).replace(/5\.1/g,"5_1")).replace(/2\.1/g,"2_1")).replace(/\./g," ")).replace(/H_264/g,"H.264")).replace(/5_1/g,"5.1")).replace(/2_1/g,"2.1"),document.getElementById("name").value=o}var FORM_MANAGER_CONDITION_SEPARATOR=" AND ",FORM_MANAGER_POSSIBILITY_SEPARATOR=" OR ",FORM_MANAGER_NAME_VALUE_SEPARATOR=" BEING ",FORM_MANAGER_DEPENDS="DEPENDS ON ",FORM_MANAGER_CONFLICTS="CONFLICTS WITH ",FORM_MANAGER_EMPTY="EMPTY";addEvent.events=[],void 0!==window.event&&addEvent(window,"unload",function(){for(var e=0,t=addEvent.events;e<t.length;++e)t[e].element.detachEvent("on"+t[e].event,t[e].handler)}),function($){$.fn.markItUp=function(settings,extraSettings){var method,params,options,ctrlKey,shiftKey,altKey;ctrlKey=shiftKey=altKey=!1;var initHeight=$(".emos").outerHeight();"string"==typeof settings&&(method=settings,params=extraSettings),options={id:"",nameSpace:"",root:"",previewHandler:!1,previewInWindow:"",previewInElement:"",previewAutoRefresh:!0,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:!1,previewParserPath:"",previewParserVar:"data",previewParserAjaxType:"POST",resizeHandle:!0,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]},$.extend(options,settings,extraSettings),options.root||$("script").each(function(e,t){miuScript=$(t).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/),null!==miuScript&&(options.root=miuScript[1])});var uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},matched=uaMatch(navigator.userAgent),browser={};return matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),this.each(function(){function localize(e,t){return t?e.replace(/("|')~\//g,"$1"+options.root):e.replace(/^~\//,options.root)}function init(){id="",nameSpace="",options.id?id='id="'+options.id+'"':$$.attr("id")&&(id='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'),options.nameSpace&&(nameSpace='id="'+options.nameSpace+'" class="'+options.nameSpace+'"'),$$.wrap("<div "+nameSpace+"></div>"),$$.wrap("<div "+id+' class="markItUp"></div>'),$$.wrap('<div class="markItUpContainer"></div>'),$$.addClass("markItUpEditor"),header=$('<div class="markItUpHeader"></div>').insertBefore($$),$(dropMenus(options.markupSet)).appendTo(header),footer=$('<div class="markItUpFooter"></div>').insertAfter($$),!0===options.resizeHandle&&!0!==browser.safari&&(resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown.markItUp",function(e){var t,i,n=$$.height(),o=e.clientY;t=function(e){return $$.css("height",Math.max(20,e.clientY+n-o)+"px"),!1},i=function(e){return $("html").unbind("mousemove.markItUp",t).unbind("mouseup.markItUp",i),!1},$("html").bind("mousemove.markItUp",t).bind("mouseup.markItUp",i)}),footer.append(resizeHandle)),$$.bind("keydown.markItUp",keyPressed).bind("keyup",keyPressed),$$.bind("insertion.markItUp",function(e,t){!1!==t.target&&get(),textarea===$.markItUp.focused&&markup(t)}),$$.bind("focus.markItUp",function(){$.markItUp.focused=this}),options.previewInElement&&refreshPreview()}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;return $("li:hover > ul",ul).css("display","block"),$.each(markupSet,function(){var button=this,t="",title,li,j;if(title=button.title?button.key?(button.title||"")+" [Ctrl+"+button.key+"]":button.title||"":button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"",key=button.key?'accesskey="'+button.key+'"':"",button.separator)li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul);else{for(i++,j=levels.length-1;j>=0;j--)t+=levels[j]+"-";li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'" title="'+title+'"><a href="#" '+key+">"+(button.name||"")+"</a></li>").bind("contextmenu.markItUp",function(){return!1}).bind("click.markItUp",function(e){e.preventDefault()}).bind("focusin.markItUp",function(){$$.focus()}).bind("mouseup",function(e){return button.call&&eval(button.call)(e),setTimeout(function(){markup(button)},1),!1}).bind("mouseenter.markItUp",function(){$("> ul",this).show(),$(document).one("click",function(){$("ul ul",header).hide()})}).bind("mouseleave.markItUp",function(){$("> ul",this).hide()}).appendTo(ul),button.dropMenu&&(levels.push(i),$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu)))}}),levels.pop(),ul}function magicMarkups(e){return e?(e=e.toString(),e=e.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(e,t){var i=t.split("|!|");return!0===altKey?void 0!==i[1]?i[1]:i[0]:void 0===i[1]?"":i[0]}),e=e.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(e,t){var i=t.split(":!:");return!0!==abort&&(value=prompt(i[0],i[1]?i[1]:""),null===value&&(abort=!0),value)})):""}function prepare(e){return $.isFunction(e)&&(e=e(hash)),magicMarkups(e)}function build(e){var t=prepare(clicked.openWith),i=prepare(clicked.placeHolder),n=prepare(clicked.replaceWith),o=prepare(clicked.closeWith),r=prepare(clicked.openBlockWith),a=prepare(clicked.closeBlockWith),s=clicked.multiline;if(""!==n)block=t+n+o;else if(""===selection&&""!==i)block=t+i+o;else{var l=[e=e||selection],c=[];!0===s&&(l=e.split(/\r?\n/));for(var p=0;p<l.length;p++){line=l[p];var h;(h=line.match(/ *$/))?c.push(t+line.replace(/ *$/g,"")+o+h):c.push(t+line+o)}block=c.join("\n")}return block=r+block+a,{block:block,openBlockWith:r,openWith:t,replaceWith:n,placeHolder:i,closeWith:o,closeBlockWith:a}}function markup(e){var t,i,n,o;if(hash=clicked=e,get(),$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey}),prepare(options.beforeInsert),prepare(clicked.beforeInsert),(!0===ctrlKey&&!0===shiftKey||!0===e.multiline)&&prepare(clicked.beforeMultiInsert),$.extend(hash,{line:1}),!0===ctrlKey&&!0===shiftKey){for(lines=selection.split(/\r?\n/),i=0,n=lines.length,o=0;o<n;o++)""!==$.trim(lines[o])?($.extend(hash,{line:++i,selection:lines[o]}),lines[o]=build(lines[o]).block):lines[o]="";string={block:lines.join("\n")},start=caretPosition,t=string.block.length+(browser.opera?n-1:0)}else!0===ctrlKey?(string=build(selection),start=caretPosition+string.openWith.length,t=string.block.length-string.openWith.length-string.closeWith.length,t-=string.block.match(/ $/)?1:0,t-=fixIeBug(string.block)):!0===shiftKey?(string=build(selection),start=caretPosition,t=string.block.length,t-=fixIeBug(string.block)):(string=build(selection),start=caretPosition+string.block.length,t=0,start-=fixIeBug(string.block));""===selection&&""===string.replaceWith&&(caretOffset+=fixOperaBug(string.block),start=caretPosition+string.openBlockWith.length+string.openWith.length,t=string.block.length-string.openBlockWith.length-string.openWith.length-string.closeWith.length-string.closeBlockWith.length,caretOffset=$$.val().substring(caretPosition,$$.val().length).length,caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))),$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition}),string.block!==selection&&!1===abort?(insert(string.block),set(start,t)):caretOffset=-1,get(),$.extend(hash,{line:"",selection:selection}),(!0===ctrlKey&&!0===shiftKey||!0===e.multiline)&&prepare(clicked.afterMultiInsert),prepare(clicked.afterInsert),prepare(options.afterInsert),previewWindow&&options.previewAutoRefresh&&refreshPreview(),shiftKey=altKey=ctrlKey=abort=!1}function fixOperaBug(e){return browser.opera?e.length-e.replace(/\n*/g,"").length:0}function fixIeBug(e){return browser.msie?e.length-e.replace(/\r*/g,"").length:0}function insert(e){document.selection?document.selection.createRange().text=e:textarea.value=textarea.value.substring(0,caretPosition)+e+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}function set(e,t){if(textarea.createTextRange){if(browser.opera&&browser.version>=9.5&&0==t)return!1;range=textarea.createTextRange(),range.collapse(!0),range.moveStart("character",e),range.moveEnd("character",t),range.select()}else textarea.setSelectionRange&&textarea.setSelectionRange(e,e+t);textarea.scrollTop=scrollPosition,textarea.focus()}function get(){if(textarea.focus(),scrollPosition=textarea.scrollTop,document.selection)if(selection=document.selection.createRange().text,browser.msie){var e=document.selection.createRange(),t=e.duplicate();for(t.moveToElementText(textarea),caretPosition=-1;t.inRange(e);)t.moveStart("character"),caretPosition++}else caretPosition=textarea.selectionStart;else caretPosition=textarea.selectionStart,selection=textarea.value.substring(caretPosition,textarea.selectionEnd);return selection}function preview(){if("function"==typeof options.previewHandler)previewWindow=!0;else if(options.previewInElement){previewWindow=$(options.previewInElement);var e=$("#"+options.previewInElement).parent().parent().attr("id");$("#"+e).is(":visible")?($("#"+e).slideToggle(1e3),$(".emos").css({"margin-top":""}),$(".scroll").animate({height:339},1e3),$(".emos").animate({height:initHeight},1e3)):($("#"+e).slideToggle(1e3),$(".emos").css("margin-top","5px"),$(".emos").animate({height:713},1e3),$(".scroll").animate({height:664},1e3))}else!previewWindow||previewWindow.closed?options.previewInWindow?(previewWindow=window.open("","preview",options.previewInWindow),$(window).unload(function(){previewWindow.close()})):(iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>'),"after"==options.previewPosition?iFrame.insertAfter(footer):iFrame.insertBefore(header),previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]):!0===altKey&&(iFrame?iFrame.remove():previewWindow.close(),previewWindow=iFrame=!1);options.previewAutoRefresh||refreshPreview(),options.previewInWindow&&previewWindow.focus()}function refreshPreview(){renderPreview()}function renderPreview(){var e=$$.val();if(options.previewParser&&"function"==typeof options.previewParser&&(e=options.previewParser(e)),!(e.length>1))return!1;if(""!=options.previewInElement){var t=$("#"+options.previewInElement).parent().parent().attr("id");$("#"+t).is(":visible")&&getAjax(e)}else getAjax(e)}function getAjax(e){return options.previewHandler&&"function"==typeof options.previewHandler?options.previewHandler(e):""!==options.previewParserPath?$.ajax({type:options.previewParserAjaxType,dataType:"text",global:!1,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent(e),success:function(e){writeInPreview(localize(e,1))}}):template||$.ajax({url:options.previewTemplatePath,dataType:"text",global:!1,success:function(t){writeInPreview(localize(t,1).replace(/<!-- content -->/g,e))}}),!1}function writeInPreview(e){if(options.previewInElement)$("#"+options.previewInElement).html(e);else if(previewWindow&&previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(e){sp=0}previewWindow.document.open(),previewWindow.document.write(e),previewWindow.document.close(),previewWindow.document.documentElement.scrollTop=sp}}function keyPressed(e){if(shiftKey=e.shiftKey,altKey=e.altKey,ctrlKey=(!e.altKey||!e.ctrlKey)&&(e.ctrlKey||e.metaKey),"keydown"===e.type){if(!0===ctrlKey&&(li=$('a[accesskey="'+(13==e.keyCode?"\\n":String.fromCharCode(e.keyCode))+'"]',header).parent("li"),0!==li.length))return ctrlKey=!1,setTimeout(function(){li.triggerHandler("mouseup")},1),!1;if(13===e.keyCode||10===e.keyCode)return!0===ctrlKey?(ctrlKey=!1,markup(options.onCtrlEnter),options.onCtrlEnter.keepDefault):!0===shiftKey?(shiftKey=!1,markup(options.onShiftEnter),options.onShiftEnter.keepDefault):(markup(options.onEnter),options.onEnter.keepDefault);if(9===e.keyCode)return 1!=shiftKey&&1!=ctrlKey&&1!=altKey&&(-1!==caretOffset?(get(),caretOffset=$$.val().length-caretOffset,set(caretOffset,0),caretOffset=-1,!1):(markup(options.onTab),options.onTab.keepDefault))}}function remove(){$$.unbind(".markItUp").removeClass("markItUpEditor"),$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$);var e=$$.parent("div").parent("div.markItUp").parent("div");e.length&&e.replaceWith($$),$$.data("markItUp",null)}var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;if($$=$(this),textarea=this,levels=[],abort=!1,scrollPosition=caretPosition=0,caretOffset=-1,options.previewParserPath=localize(options.previewParserPath),options.previewTemplatePath=localize(options.previewTemplatePath),method)switch(method){case"remove":remove();break;case"insert":markup(params);break;default:$.error("Method "+method+" does not exist on jQuery.markItUp")}else init()})},$.fn.markItUpRemove=function(){return this.each(function(){$(this).markItUp("remove")})},$.markItUp=function(e){var t={target:!1};if($.extend(t,e),t.target)return $(t.target).each(function(){$(this).focus(),$(this).trigger("insertion",[t])});$("textarea").trigger("insertion",[t])}}(jQuery);var myBbcodeSettings={nameSpace:"bbcode",previewParserPath:"./ajax/bbcode_parser.php",previewInElement:"preview-window",markupSet:[{name:"Bold",key:"B",openWith:"[b]",closeWith:"[/b]"},{name:"Italic",key:"I",openWith:"[i]",closeWith:"[/i]"},{name:"Underline",key:"U",openWith:"[u]",closeWith:"[/u]"},{name:"Strike through",key:"S",openWith:"[s]",closeWith:"[/s]"},{separator:"---------------"},{name:"Picture",key:"P",replaceWith:"[img][![Url]!][/img]"},{name:"Link",key:"L",openWith:"[url=[![Url]!]]",closeWith:"[/url]",placeHolder:"Your text to link here..."},{separator:"---------------"},{name:"Colors",openWith:"[color=[![Color]!]]",closeWith:"[/color]",dropMenu:[{name:"Yellow",openWith:"[color=yellow]",closeWith:"[/color]",className:"col1-1"},{name:"Orange",openWith:"[color=orange]",closeWith:"[/color]",className:"col1-2"},{name:"Red",openWith:"[color=red]",closeWith:"[/color]",className:"col1-3"},{name:"Blue",openWith:"[color=blue]",closeWith:"[/color]",className:"col2-1"},{name:"Purple",openWith:"[color=purple]",closeWith:"[/color]",className:"col2-2"},{name:"Green",openWith:"[color=green]",closeWith:"[/color]",className:"col2-3"},{name:"White",openWith:"[color=white]",closeWith:"[/color]",className:"col3-1"},{name:"Gray",openWith:"[color=gray]",closeWith:"[/color]",className:"col3-2"},{name:"Black",openWith:"[color=black]",closeWith:"[/color]",className:"col3-3"}]},{name:"Size",key:"S",openWith:"[size=[![Text size]!]]",closeWith:"[/size]",dropMenu:[{name:"xx-large",openWith:"[size=7]",closeWith:"[/size]"},{name:"x-large",openWith:"[size=6]",closeWith:"[/size]"},{name:"large",openWith:"[size=5]",closeWith:"[/size]"},{name:"medium",openWith:"[size=4]",closeWith:"[/size]"},{name:"small",openWith:"[size=3]",closeWith:"[/size]"},{name:"x-small",openWith:"[size=2]",closeWith:"[/size]"},{name:"xx-small",openWith:"[size=1]",closeWith:"[/size]"}]},{separator:"---------------"},{name:"Unordered list",openWith:"[list]\n",closeWith:"[/list]"},{name:"Ordered list",openWith:"[list=[![Starting number]!]]\n",closeWith:"\n[/list]"},{name:"List item",openWith:"[*] "},{separator:"---------------"},{name:"Align Left",openWith:"[left]",closeWith:"[/left]"},{name:"Align Center",openWith:"[center]",closeWith:"[/center]"},{name:"Align Right",openWith:"[right]",closeWith:"[/right]"},{separator:"---------------"},{name:"Quotes",key:"Q",openWith:"[quote]",closeWith:"[/quote]"},{name:"Code",key:"K",openWith:"[code]",closeWith:"[/code]"},{separator:"---------------"},{name:"Table generator",className:"tablegenerator",placeholder:"Your text here...",replaceWith:function(e){var t=prompt("How many cols?"),i=prompt("How many rows?"),n="[table]\n";if("yes"==prompt("Is first row a table header? (yes or no)"))for(r=0;r<t;r++)n+="\t[th] [![TH"+(r+1)+" text:]!][/th]\n";for(var o=0;o<i;o++){n+="\t[tr]\n";for(var r=0;r<t;r++)n+="\t\t[td]"+(e.placeholder||"")+"[/td]\n";n+="\t[/tr]\n"}return n+="[/table]"}},{separator:"---------------"},{name:"Clean",className:"clean",replaceWith:function(e){return e.selection.replace(/\[(.*?)\]/g,"")}},{name:"Preview",key:"!",className:"preview",call:"preview"}]};$(document).ready(function(){$("#box_1").hide(),$("#box_2").hide(),$("#box_3").hide(),$("#box_4").hide(),$("#box_1").fadeIn("slow"),$("a#smilies").click(function(){$("#box_1").show("slow"),$("#box_2").hide(),$("#box_3").hide(),$("#box_4").hide()}),$("a#custom").click(function(){$("#box_1").hide(),$("#box_2").show("slow"),$("#box_3").hide(),$("#box_4").hide()}),$("a#staff").click(function(){$("#box_1").hide(),$("#box_2").hide(),$("#box_3").show("slow"),$("#box_4").hide()}),$("#bbcode_editor").length&&$("#bbcode_editor").markItUp(myBbcodeSettings),$(".emoticons a").click(function(){return emoticon=$(this).attr("title"),$.markItUp({openWith:emoticon}),!1}),$("#tool_open").click(function(){$("#tools").slideToggle("slow",function(){}),$("#tool_open").hide(),$("#tool_close").show()}),$("#tool_close").click(function(){$("#tools").slideToggle("slow",function(){}),$("#tool_close").hide(),$("#tool_open").show()}),$("#more").click(function(){$("#attach_more").slideToggle("slow",function(){})})});