!function(e){"use strict";function t(e,t,n){"addEventListener"in window?e.addEventListener(t,n,!1):"attachEvent"in window&&e.attachEvent("on"+t,n)}function n(e,t,n){"removeEventListener"in window?e.removeEventListener(t,n,!1):"detachEvent"in window&&e.detachEvent("on"+t,n)}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e){return le+"["+de+"] "+e}function r(e){ce&&"object"==typeof window.console&&console.log(i(e))}function a(e){"object"==typeof window.console&&console.warn(i(e))}function u(){c(),r("Initialising iFrame ("+location.href+")"),l(),f(),d("background",j),d("padding",$),M(),v(),y(),m(),N(),b(),re=I(),D("init","Init message from host page"),Ie()}function c(){function t(e){return"true"===e}var n=ie.substr(se).split(":");de=n[0],K=e!==n[1]?Number(n[1]):K,G=e!==n[2]?t(n[2]):G,ce=e!==n[3]?t(n[3]):ce,ae=e!==n[4]?Number(n[4]):ae,J=e!==n[6]?t(n[6]):J,X=n[7],ne=e!==n[8]?n[8]:ne,j=n[9],$=n[10],ve=e!==n[11]?Number(n[11]):ve,re.enable=e!==n[12]&&t(n[12]),me=e!==n[13]?n[13]:me,Se=e!==n[14]?n[14]:Se}function l(){function e(e,t){return"function"==typeof e&&(r("Setup custom "+t+"CalcMethod"),Ce[t]=e,e="custom"),e}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(function(){var e=window.iFrameResizer;r("Reading data from page: "+JSON.stringify(e)),Me="messageCallback"in e?e.messageCallback:Me,Ie="readyCallback"in e?e.readyCallback:Ie,pe="targetOrigin"in e?e.targetOrigin:pe,ne="heightCalculationMethod"in e?e.heightCalculationMethod:ne,Se="widthCalculationMethod"in e?e.widthCalculationMethod:Se}(),ne=e(ne,"height"),Se=e(Se,"width")),r("TargetOrigin for parent set to: "+pe)}function s(e,t){return-1!==t.indexOf("-")&&(a("Negative CSS value ignored for "+e),t=""),t}function d(t,n){e!==n&&""!==n&&"null"!==n&&(document.body.style[t]=n,r("Body "+t+' set to "'+n+'"'))}function f(){e===X&&(X=K+"px"),d("margin",s("margin",X))}function m(){document.documentElement.style.height="",document.body.style.height="",r('HTML & body height set to "auto"')}function g(e){var i={add:function(n){function o(){D(e.eventName,e.eventType)}ke[n]=o,t(window,n,o)},remove:function(e){var t=ke[e];delete ke[e],n(window,e,t)}};e.eventNames&&Array.prototype.map?(e.eventName=e.eventNames[0],e.eventNames.map(i[e.method])):i[e.method](e.eventName),r(o(e.method)+" event listener: "+e.eventType)}function h(e){g({method:e,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),g({method:e,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),g({method:e,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),g({method:e,eventType:"Input",eventName:"input"}),g({method:e,eventType:"Mouse Up",eventName:"mouseup"}),g({method:e,eventType:"Mouse Down",eventName:"mousedown"}),g({method:e,eventType:"Orientation Change",eventName:"orientationchange"}),g({method:e,eventType:"Print",eventName:["afterprint","beforeprint"]}),g({method:e,eventType:"Ready State Change",eventName:"readystatechange"}),g({method:e,eventType:"Touch Start",eventName:"touchstart"}),g({method:e,eventType:"Touch End",eventName:"touchend"}),g({method:e,eventType:"Touch Cancel",eventName:"touchcancel"}),g({method:e,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),g({method:e,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),g({method:e,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===me&&g({method:e,eventType:"IFrame Resized",eventName:"resize"})}function p(e,t,n,o){return t!==e&&(e in n||(a(e+" is not a valid option for "+o+"CalculationMethod."),e=t),r(o+' calculation method set to "'+e+'"')),e}function v(){ne=p(ne,te,xe,"height")}function y(){Se=p(Se,Ee,ze,"width")}function b(){!0===J?(h("add"),A()):r("Auto Resize disabled")}function w(){r("Disable outgoing messages"),ge=!1}function T(){r("Remove event listener: Message"),n(window,"message",V)}function E(){null!==Y&&Y.disconnect()}function S(){h("remove"),E(),clearInterval(ue)}function O(){w(),T(),!0===J&&S()}function M(){var e=document.createElement("div");e.style.clear="both",e.style.display="block",document.body.appendChild(e)}function I(){function n(){return{x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop}}function o(e){var t=e.getBoundingClientRect(),o=n();return{x:parseInt(t.left,10)+parseInt(o.x,10),y:parseInt(t.top,10)+parseInt(o.y,10)}}function i(t){var n=t.split("#")[1]||t,i=decodeURIComponent(n),a=document.getElementById(i)||document.getElementsByName(i)[0];e!==a?function(e){var t=o(e);r("Moving to in page link (#"+n+") at x: "+t.x+" y: "+t.y),B(t.y,t.x,"scrollToOffset")}(a):(r("In page link (#"+n+") not found in iFrame, so sending to parent"),B(0,0,"inPageLink","#"+n))}function u(){""!==location.hash&&"#"!==location.hash&&i(location.href)}function c(){Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),function(e){"#"!==e.getAttribute("href")&&t(e,"click",function(e){e.preventDefault(),i(this.getAttribute("href"))})})}function l(){t(window,"hashchange",u)}function s(){setTimeout(u,Z)}return re.enable?Array.prototype.forEach&&document.querySelectorAll?(r("Setting up location.hash handlers"),c(),l(),s()):a("In page linking not fully supported in this browser! (See README.md for IE8 workaround)"):r("In page linking not enabled"),{findTarget:i}}function N(){r("Enable public methods"),Oe.parentIFrame={autoResize:function(e){return!0===e&&!1===J?(J=!0,b()):!1===e&&!0===J&&(J=!1,S()),J},close:function(){B(0,0,"close"),O()},getId:function(){return de},getPageInfo:function(e){"function"==typeof e?(Ne=e,B(0,0,"pageInfo")):(Ne=function(){},B(0,0,"pageInfoStop"))},moveToAnchor:function(e){re.findTarget(e)},reset:function(){H("parentIFrame.reset")},scrollTo:function(e,t){B(t,e,"scrollTo")},scrollToOffset:function(e,t){B(t,e,"scrollToOffset")},sendMessage:function(e,t){B(0,0,"message",JSON.stringify(e),t)},setHeightCalculationMethod:function(e){ne=e,v()},setWidthCalculationMethod:function(e){Se=e,y()},setTargetOrigin:function(e){r("Set targetOrigin: "+e),pe=e},size:function(e,t){D("size","parentIFrame.size("+((e||"")+(t?","+t:""))+")",e,t)}}}function C(){0!==ae&&(r("setInterval: "+ae+"ms"),ue=setInterval(function(){D("interval","setInterval: "+ae)},Math.abs(ae)))}function k(){function t(e){function t(e){!1===e.complete&&(r("Attach listeners to "+e.src),e.addEventListener("load",a,!1),e.addEventListener("error",u,!1),l.push(e))}"attributes"===e.type&&"src"===e.attributeName?t(e.target):"childList"===e.type&&Array.prototype.forEach.call(e.target.querySelectorAll("img"),t)}function n(e){l.splice(l.indexOf(e),1)}function o(e){r("Remove listeners from "+e.src),e.removeEventListener("load",a,!1),e.removeEventListener("error",u,!1),n(e)}function i(t,n,i){o(t.target),D(n,i+": "+t.target.src,e,e)}function a(e){i(e,"imageLoad","Image loaded")}function u(e){i(e,"imageLoadFailed","Image load failed")}function c(e){D("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)}var l=[],s=window.MutationObserver||window.WebKitMutationObserver,d=function(){var e=document.querySelector("body"),t={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return d=new s(c),r("Create body MutationObserver"),d.observe(e,t),d}();return{disconnect:function(){"disconnect"in d&&(r("Disconnect body MutationObserver"),d.disconnect(),l.forEach(o))}}}function A(){var e=0>ae;window.MutationObserver||window.WebKitMutationObserver?e?C():Y=k():(r("MutationObserver not supported in this browser!"),C())}function x(e,t){var n=0;return t=t||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(n=document.defaultView.getComputedStyle(t,null),n=null!==n?n[e]:0):n=function(e){if(/^\d+(px)?$/i.test(e))return parseInt(e,U);var n=t.style.left,o=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft,t.style.left=n,t.runtimeStyle.left=o,e}(t.currentStyle[e]),parseInt(n,U)}function z(e){e>we/2&&(we=2*e,r("Event throttle increased to "+we+"ms"))}function R(e,t){for(var n=t.length,i=0,a=0,u=o(e),c=Ae(),l=0;n>l;l++)(i=t[l].getBoundingClientRect()[e]+x("margin"+u,t[l]))>a&&(a=i);return c=Ae()-c,r("Parsed "+n+" HTML elements"),r("Element position calculated in "+c+"ms"),z(c),a}function L(e){return[e.bodyOffset(),e.bodyScroll(),e.documentElementOffset(),e.documentElementScroll()]}function F(e,t){var n=document.querySelectorAll("["+t+"]");return 0===n.length&&(a("No tagged elements ("+t+") found on page"),document.querySelectorAll("body *")),R(e,n)}function P(){return document.querySelectorAll("body *")}function D(e,t,n,o){ye&&e in Q?r("Trigger event cancelled: "+e):(e in{reset:1,resetPage:1,init:1}||r("Trigger event: "+t),Re(e,t,n,o))}function W(){ye||(ye=!0,r("Trigger event lock on")),clearTimeout(be),be=setTimeout(function(){ye=!1,r("Trigger event lock off"),r("--")},Z)}function q(e){ee=xe[ne](),Te=ze[Se](),B(ee,Te,e)}function H(e){var t=ne;ne=te,r("Reset trigger event: "+e),W(),q("reset"),ne=t}function B(t,n,o,i,a){!0===ge&&(e===a?a=pe:r("Message targetOrigin: "+a),function(){var u=de+":"+t+":"+n+":"+o+(e!==i?":"+i:"");r("Sending message to host page ("+u+")"),he.postMessage(le+u,a)}())}function V(e){function n(){return e.data.split("]")[1].split(":")[0]}function o(){return e.data.substr(e.data.indexOf(":")+1)}function i(){return!("undefined"!=typeof module&&module.exports)&&"iFrameResize"in window}function c(){return e.data.split(":")[2]in{true:1,false:1}}function l(){var t=n();t in s?s[t]():i()||c()||a("Unexpected message ("+e.data+")")}var s={init:function(){document.body?(ie=e.data,he=e.source,u(),_=!1,setTimeout(function(){oe=!1},Z)):(r("Waiting for page ready"),t(window,"readystatechange",s.initFromParent))},reset:function(){oe?r("Page reset ignored by init"):(r("Page size reset by host page"),q("resetPage"))},resize:function(){D("resizeParent","Parent window requested size check")},moveToAnchor:function(){re.findTarget(o())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var e=o();r("PageInfoFromParent called from parent: "+e),Ne(JSON.parse(e)),r(" --")},message:function(){var e=o();r("MessageCallback called from parent: "+e),Me(JSON.parse(e)),r(" --")}};le===(""+e.data).substr(0,se)&&(!1===_?l():c()?s.init():r('Ignored message of type "'+n()+'". Received before initialization.'))}if("undefined"!=typeof window){var J=!0,U=10,j="",K=0,X="",Y=null,$="",G=!1,Q={resize:1,click:1},Z=128,_=!0,ee=1,te="bodyOffset",ne=te,oe=!0,ie="",re={},ae=32,ue=null,ce=!1,le="[iFrameSizer]",se=le.length,de="",fe={max:1,min:1,bodyScroll:1,documentElementScroll:1},me="child",ge=!0,he=window.parent,pe="*",ve=0,ye=!1,be=null,we=16,Te=1,Ee="scroll",Se=Ee,Oe=window,Me=function(){a("MessageCallback function not defined")},Ie=function(){},Ne=function(){},Ce={height:function(){return a("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return a("Custom width calculation function not defined"),document.body.scrollWidth}},ke={},Ae=Date.now||function(){return(new Date).getTime()},xe={bodyOffset:function(){return document.body.offsetHeight+x("marginTop")+x("marginBottom")},offset:function(){return xe.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Ce.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,L(xe))},min:function(){return Math.min.apply(null,L(xe))},grow:function(){return xe.max()},lowestElement:function(){return Math.max(xe.bodyOffset(),R("bottom",P()))},taggedElement:function(){return F("bottom","data-iframe-height")}},ze={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Ce.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(ze.bodyScroll(),ze.documentElementScroll())},max:function(){return Math.max.apply(null,L(ze))},min:function(){return Math.min.apply(null,L(ze))},rightMostElement:function(){return R("right",P())},taggedElement:function(){return F("right","data-iframe-width")}},Re=function(e){var t,n,o,i=null,r=0,a=function(){r=Ae(),i=null,o=e.apply(t,n),i||(t=n=null)};return function(){var u=Ae();r||(r=u);var c=we-(u-r);return t=this,n=arguments,0>=c||c>we?(i&&(clearTimeout(i),i=null),r=u,o=e.apply(t,n),i||(t=n=null)):i||(i=setTimeout(a,c)),o}}(function(t,n,o,i){function a(){return!(t in{init:1,interval:1,size:1})}function u(){return ne in fe||G&&Se in fe}function c(){r("No change in size detected")}var l,s;!function(){function t(e,t){return!(Math.abs(e-t)<=ve)}return l=e!==o?o:xe[ne](),s=e!==i?i:ze[Se](),t(ee,l)||G&&t(Te,s)}()&&"init"!==t?a()&&u()?H(n):t in{interval:1}||c():(W(),B(ee=l,Te=s,t))});t(window,"message",V),"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}();